<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  

    <link rel="apple-touch-icon" type="image/png" href="https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png">

    <meta name="apple-mobile-web-app-title" content="CodePen">

    <link rel="shortcut icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">

    <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-b4b4269c16397ad2f0f7a01bcdf513a1994f4c94b8af2f191c09eb0d601762b1.svg" color="#111">



  
  <title>CodePen - fullCalendar with custom agenda view</title>
    <link rel="canonical" href="https://codepen.io/lanc/pen/LYJRpa">
  
  
  <link rel="stylesheet" href="LYJRpa_data/jquery-ui.css">
<link rel="stylesheet" href="LYJRpa_data/fullcalendar.min.css">
  
<style>
#calendar {
  width: 80%;
  
}


/* ------- Agenda View ------- */
#agendaView > table{
    width: 100%;
    min-height: 500px;
    background: #FFF;
    
}

#agendaView .fc-agendaView-event-start,
#agendaView .fc-agendaView-event-end{
    width: 20%;
}

#agendaView .fc-agendaView-event-title{
    width: 60%;
}
#agendaView th{
    height: 30px;
    font-size: 14px;
    vertical-align: text-bottom;
    font-weight: bold;
    padding: 10px 0 0 10px;
}

#agendaView td{
    height: 30px;
    padding: 10px 0 0 10px;
    font-size: 14px;
    vertical-align: text-bottom;    
}
</style>

  
  
  
</head>

<body translate="no">
  <div id="calendar" class="fc fc-ltr"><table class="fc-header" style="width:100%"><tbody><tr><td class="fc-header-left"><span class="fc-header-space"></span><span class="fc-button fc-button-today fc-state-default fc-corner-left fc-state-disabled" unselectable="on" style="user-select: none;">today</span><span class="fc-button fc-button-prev fc-state-default" unselectable="on" style="user-select: none;"><span class="fc-text-arrow">‹</span></span><span class="fc-button fc-button-next fc-state-default fc-corner-right" unselectable="on" style="user-select: none;"><span class="fc-text-arrow">›</span></span><span class="fc-header-space"></span><span class="fc-header-space"></span><span class="fc-header-title"><h2>May 2023</h2></span></td><td class="fc-header-center"></td><td class="fc-header-right"><span class="fc-button fc-button-month fc-state-default fc-corner-left fc-state-active" unselectable="on" style="user-select: none;">month</span><span class="fc-button fc-button-agendaWeek fc-state-default" unselectable="on" style="user-select: none;">week</span><span class="fc-button fc-button-agendaDay fc-state-default" unselectable="on" style="user-select: none;">day</span><span class="fc-button fc-state-default fc-corner-right fc-button-agendaView" unselectable="on" style="user-select: none;">agenda</span><span class="fc-header-space"></span></td></tr></tbody></table><div class="fc-content" style="position: relative;"><div class="fc-view fc-view-month fc-grid" style="position: relative; user-select: none;" unselectable="on"><div class="fc-event-container" style="position:absolute;z-index:8;top:0;left:0"><div class="fc-event fc-event-hori fc-event-draggable fc-event-start fc-event-end" style="position: absolute; left: 84px; width: 74px; top: 240px;"><div class="fc-event-inner"><span class="fc-event-title">NEW EVENT</span></div><div class="ui-resizable-handle ui-resizable-e">&nbsp;&nbsp;&nbsp;</div></div></div><table class="fc-border-separate" style="width:100%" cellspacing="0"><thead><tr class="fc-first fc-last"><th class="fc-day-header fc-sun fc-widget-header fc-first" style="width: 80px;">Sun</th><th class="fc-day-header fc-mon fc-widget-header" style="width: 80px;">Mon</th><th class="fc-day-header fc-tue fc-widget-header" style="width: 80px;">Tue</th><th class="fc-day-header fc-wed fc-widget-header" style="width: 80px;">Wed</th><th class="fc-day-header fc-thu fc-widget-header" style="width: 80px;">Thu</th><th class="fc-day-header fc-fri fc-widget-header" style="width: 80px;">Fri</th><th class="fc-day-header fc-sat fc-widget-header fc-last">Sat</th></tr></thead><tbody><tr class="fc-week fc-first"><td class="fc-day fc-sun fc-widget-content fc-other-month fc-past fc-first" data-date="2023-04-30"><div style="min-height: 67px;"><div class="fc-day-number">30</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-past" data-date="2023-05-01"><div><div class="fc-day-number">1</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-past" data-date="2023-05-02"><div><div class="fc-day-number">2</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-past" data-date="2023-05-03"><div><div class="fc-day-number">3</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-past" data-date="2023-05-04"><div><div class="fc-day-number">4</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-past" data-date="2023-05-05"><div><div class="fc-day-number">5</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-past fc-last" data-date="2023-05-06"><div><div class="fc-day-number">6</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td></tr><tr class="fc-week"><td class="fc-day fc-sun fc-widget-content fc-past fc-first" data-date="2023-05-07"><div style="min-height: 66px;"><div class="fc-day-number">7</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-past" data-date="2023-05-08"><div><div class="fc-day-number">8</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-past" data-date="2023-05-09"><div><div class="fc-day-number">9</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-past" data-date="2023-05-10"><div><div class="fc-day-number">10</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-past" data-date="2023-05-11"><div><div class="fc-day-number">11</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-past" data-date="2023-05-12"><div><div class="fc-day-number">12</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-past fc-last" data-date="2023-05-13"><div><div class="fc-day-number">13</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td></tr><tr class="fc-week"><td class="fc-day fc-sun fc-widget-content fc-past fc-first" data-date="2023-05-14"><div style="min-height: 66px;"><div class="fc-day-number">14</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-past" data-date="2023-05-15"><div><div class="fc-day-number">15</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-past" data-date="2023-05-16"><div><div class="fc-day-number">16</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-past" data-date="2023-05-17"><div><div class="fc-day-number">17</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-past" data-date="2023-05-18"><div><div class="fc-day-number">18</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-past" data-date="2023-05-19"><div><div class="fc-day-number">19</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-past fc-last" data-date="2023-05-20"><div><div class="fc-day-number">20</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td></tr><tr class="fc-week"><td class="fc-day fc-sun fc-widget-content fc-past fc-first" data-date="2023-05-21"><div style="min-height: 66px;"><div class="fc-day-number">21</div><div class="fc-day-content"><div style="position: relative; height: 18px;">&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-today fc-state-highlight" data-date="2023-05-22"><div><div class="fc-day-number">22</div><div class="fc-day-content"><div style="position: relative; height: 18px;">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-future" data-date="2023-05-23"><div><div class="fc-day-number">23</div><div class="fc-day-content"><div style="position: relative; height: 18px;">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-future" data-date="2023-05-24"><div><div class="fc-day-number">24</div><div class="fc-day-content"><div style="position: relative; height: 18px;">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-future" data-date="2023-05-25"><div><div class="fc-day-number">25</div><div class="fc-day-content"><div style="position: relative; height: 18px;">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-future" data-date="2023-05-26"><div><div class="fc-day-number">26</div><div class="fc-day-content"><div style="position: relative; height: 18px;">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-future fc-last" data-date="2023-05-27"><div><div class="fc-day-number">27</div><div class="fc-day-content"><div style="position: relative; height: 18px;">&nbsp;</div></div></div></td></tr><tr class="fc-week"><td class="fc-day fc-sun fc-widget-content fc-future fc-first" data-date="2023-05-28"><div style="min-height: 66px;"><div class="fc-day-number">28</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-future" data-date="2023-05-29"><div><div class="fc-day-number">29</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-future" data-date="2023-05-30"><div><div class="fc-day-number">30</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-future" data-date="2023-05-31"><div><div class="fc-day-number">31</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-other-month fc-future" data-date="2023-06-01"><div><div class="fc-day-number">1</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-other-month fc-future" data-date="2023-06-02"><div><div class="fc-day-number">2</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-other-month fc-future fc-last" data-date="2023-06-03"><div><div class="fc-day-number">3</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td></tr><tr class="fc-week fc-last"><td class="fc-day fc-sun fc-widget-content fc-other-month fc-future fc-first" data-date="2023-06-04"><div style="min-height: 66px;"><div class="fc-day-number">4</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-mon fc-widget-content fc-other-month fc-future" data-date="2023-06-05"><div><div class="fc-day-number">5</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-tue fc-widget-content fc-other-month fc-future" data-date="2023-06-06"><div><div class="fc-day-number">6</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-wed fc-widget-content fc-other-month fc-future" data-date="2023-06-07"><div><div class="fc-day-number">7</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-thu fc-widget-content fc-other-month fc-future" data-date="2023-06-08"><div><div class="fc-day-number">8</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-fri fc-widget-content fc-other-month fc-future" data-date="2023-06-09"><div><div class="fc-day-number">9</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td><td class="fc-day fc-sat fc-widget-content fc-other-month fc-future fc-last" data-date="2023-06-10"><div><div class="fc-day-number">10</div><div class="fc-day-content"><div style="position: relative; height: 0px;">&nbsp;</div></div></div></td></tr></tbody></table></div></div>
  
</div>
    <script src="../LZjjWV_data/LZjjWV_data/stopExecutionOnTimeout-2c7831bb44f98c1391d6a4ffda0e1fd3025033.js"></script>

  <script src="LYJRpa_data/jquery.min.js"></script>
<script src="LYJRpa_data/jquery-ui.min.js"></script>
<script src="LYJRpa_data/fullcalendar.min.js"></script>
<script src="LYJRpa_data/moment.min.js"></script>
<script src="LYJRpa_data/moment-range.js"></script>
      <script id="rendered-js">
var $calendar = $("#calendar");
$calendar.fullCalendar({
  header: {
    left: ' today,prev,next,  title',
    right: 'month,agendaWeek,agendaDay ' },

  weekends: true,
  allDaySlot: true,
  droppable: true, /* 允許拖入 */
  eventAfterAllRender: function (view) {
    var header = $calendar.find(".fc-header");
    // trigger current view
    header.find('.fc-header-right').find('.fc-button').off('mouseup').on('mouseup', function () {
      if (!$(this).hasClass('fc-button-agendaView')) {
        $calendar.data("view", '');
      }
    });

    //用來辨別是否在agendaView，是則重繪，否則移除
    if ($calendar.data("view") != 'agendaView') {
      header.find(".fc-button-agendaView").removeClass('fc-state-active active');
      $("#agendaView").remove();

    } else {
      renderAgendaView();
    }



  },
  eventRender: function (event, e) {

    currentView = $('#calendar').fullCalendar('getView').name; /* 用來偵測哪個view進行什麼樣的處理用 */
  }, dayClick: function (date, jsEvent, view) {
    /* 點選日期觸發 */


  },
  eventClick: function (calEvent, jsEvent, view) {
    console.log("===== eventClick =====");
    console.log(calEvent);


  } });


var headerRight = $calendar.find(".fc-header").find(".fc-header-right");

var agendaBtn = headerRight.find(".fc-corner-right").removeClass('fc-corner-right').
clone().addClass('fc-corner-right fc-button-agendaView').removeClass('fc-button-agendaDay').text("agenda");

agendaBtn.on('click', function () {
  renderAgendaView();
});

headerRight.find(".fc-header-space").before(agendaBtn);

// test event data
var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();

var newEvent = {
  title: 'NEW EVENT',
  start: new Date(y, m, d, 10),
  end: new Date(y, m, d, 15),
  editable: true };


// add event to calendar
var event = $('#calendar').fullCalendar('renderEvent', newEvent, 'stick');



function renderAgendaView() {

  if ($calendar.fullCalendar('getView') != 'agendaView') {
    // 複製原本的month為agendaView ，這樣可解決切換為agenda View時 month 無法點之問題
    $calendar.fullCalendar('changeView', 'month');
    var newView = $calendar.fullCalendar('getView');
    newView.name = 'agendaView';

    $calendar.fullCalendar('changeView', 'agendaView');
  }

  // get current events in memory
  var events = $calendar.fullCalendar('clientEvents');

  // get current date
  var currentDate = $calendar.fullCalendar('getDate');

  $calendar.find(".fc-header").find(".fc-button-agendaView").siblings().removeClass('fc-state-active').end().addClass('fc-state-active');

  $calendar.data("view", 'agendaView');
  var agendaViewHtml = document.createElement('div');
  agendaViewHtml.setAttribute("id", "agendaView");
  var contents = "<table>" +
  "<thead><tr>" +
  "<th class='fc-widget-header fc-agendaView-event-start'>DateStart</th>" +
  "<th class='fc-widget-header fc-agendaView-event-end'>DateEnd</th>" +
  "<th class='fc-widget-header fc-agendaView-event-title'>Event</th>" +
  "</tr></thead>" +
  "<tbody>";

  for (key in events) {
    //  detect month range
    var monthRange = moment().range(moment(currentDate).startOf('month'), moment(currentDate).endOf('month'));
    var eventStart = moment(events[key].start).format("YYYY/MM/DD-H:mm:ss");
    var eventEnd = moment(events[key].end).format("YYYY/MM/DD-H:mm:ss");
    if (monthRange.contains(events[key].start) && monthRange.contains(events[key].end)) {
      var eventTitle = events[key].title;
      contents += '<tr>' +
      '<td class="fc-widget-content">' + eventStart + '</td>' +
      '<td class="fc-widget-content">' + eventEnd + '</td>' +
      '<td class="fc-widget-content">' + eventTitle + '</td>' +
      '</tr>';

    }
  }
  contents += "</tbody></table>";
  agendaViewHtml.innerHTML = contents;
  $calendar.find(".fc-content").html(agendaViewHtml);

  // console.log(events);
}
//# sourceURL=pen.js
    </script>

  
  <script src="../LZjjWV_data/LZjjWV_data/iframeRefreshCSS-44fe83e49b63affec96918c9af88c0d80b209a862cf8.js"></script>



</body></html>